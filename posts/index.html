<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Posts | Hi-^_^</title><meta name=keywords content><meta name=description content="Posts - Hi-^_^"><meta name=author content><link rel=canonical href=https://Anlarry.github.io/posts/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.7f1ac8b080e85ee8d2f0c5df6cae451882d6c317300428a0d21158c978a5020b.css integrity="sha256-fxrIsIDoXujS8MXfbK5FGILWwxcwBCig0hFYyXilAgs=" rel="preload stylesheet" as=style><link rel=icon href=https://Anlarry.github.io/icon/ai512.png><link rel=icon type=image/png sizes=16x16 href=https://Anlarry.github.io/icon/ai16.png><link rel=icon type=image/png sizes=32x32 href=https://Anlarry.github.io/icon/ai32.png><link rel=apple-touch-icon href=https://Anlarry.github.io/apple-touch-icon.png><link rel=mask-icon href=https://Anlarry.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://Anlarry.github.io/posts/index.xml><link rel=alternate hreflang=en href=https://Anlarry.github.io/posts/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-VHNG5P8WWQ"></script><script>var doNotTrack=!1,dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes";if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-VHNG5P8WWQ")}</script><meta property="og:url" content="https://Anlarry.github.io/posts/"><meta property="og:site_name" content="Hi-^_^"><meta property="og:title" content="Posts"><meta property="og:description" content="this is Jiali's Tech Blog"><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta name=twitter:card content="summary"><meta name=twitter:title content="Posts"><meta name=twitter:description content="this is Jiali's Tech Blog"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://Anlarry.github.io/posts/"}]}</script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css integrity=sha384-R4558gYOUz8mP9YWpZJjofhk+zx0AS11p36HnD2ZKj/6JR5z27gSSULCNHIRReVs crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.js integrity=sha384-z1fJDqw8ZApjGO3/unPWUPsIymfsJmyrDVWC8Tv/a1HeOtGmkwNd/7xUS0Xcnvsx crossorigin=anonymous></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/contrib/auto-render.min.js integrity=sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR crossorigin=anonymous onload=renderMathInElement(document.body)></script><script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}]})})</script></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://Anlarry.github.io/ accesskey=h title="Jiali's Blog (Alt + H)"><img src=https://Anlarry.github.io/icon/ai512.png alt aria-label=logo height=35>Jiali's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://Anlarry.github.io/archives/ title="Archives ğŸ“¦"><span>Archives ğŸ“¦</span></a></li><li><a href=https://Anlarry.github.io/categories/ title="Categories ğŸ“‚"><span>Categories ğŸ“‚</span></a></li><li><a href=https://Anlarry.github.io/tags/ title="Tags ğŸ”–"><span>Tags ğŸ”–</span></a></li><li><a href=https://Anlarry.github.io/book_reading/ title="Book-Reading ğŸ“š"><span>Book-Reading ğŸ“š</span></a></li><li><a href=https://Anlarry.github.io/search/ title="Search ğŸ” (Alt + /)" accesskey=/><span>Search ğŸ”</span></a></li></ul></nav></header><main class=main><header class=page-header><div class=breadcrumbs><a href=https://Anlarry.github.io/>Home</a></div><h1>Posts</h1></header><article class=post-entry><figure class=entry-cover><img loading=lazy srcset='https://Anlarry.github.io/posts/paper-reading/gnn-application-in-recommendation/2023-03-17-19-45-23_hu_1ef9cb16daabcb87.png 360w,https://Anlarry.github.io/posts/paper-reading/gnn-application-in-recommendation/2023-03-17-19-45-23_hu_8bebf48b8ec8a746.png 480w,https://Anlarry.github.io/posts/paper-reading/gnn-application-in-recommendation/2023-03-17-19-45-23.png 645w' src=https://Anlarry.github.io/posts/paper-reading/gnn-application-in-recommendation/2023-03-17-19-45-23.png sizes="(min-width: 768px) 720px, 100vw" width=645 height=376 alt></figure><header class=entry-header><h2 class=entry-hint-parent>GNN Application in Recommendation</h2></header><div class=entry-content><p>Prelude GNNæ˜¯æœ€è¿‘å‡ å¹´ä¸­æœºå™¨å­¦ä¹ è¾ƒæ–°çš„ä¸€ä¸ªå‘å±•æ–¹å‘ï¼Œä¹Ÿæ˜¯å­¦æœ¯ç•Œå’Œå·¥ä¸šç•Œç ”ç©¶çš„çƒ­ç‚¹è¯é¢˜ã€‚ç›¸æ¯”äºnode2vecã€PageRankï¼ŒGNNå…·æœ‰æ›´å¼ºå¤§çš„å­¦ä¹ èƒ½åŠ›ï¼Œèƒ½å¤Ÿæ›´å¥½å¾—æ„ŸçŸ¥å›¾æ•°æ®ã€‚
GNNçš„ä¸€ä¸ªç»å…¸åº”ç”¨åœºæ™¯æ˜¯æ¨èç³»ç»Ÿã€‚åƒæ·˜å®è¿™æ ·çš„ç”µå•†å¹³å°ï¼Œå¤§é‡çš„ç”¨æˆ·å’Œå•†å“ï¼Œè‡ªç„¶è€Œç„¶åœ°å½¢æˆäº†ä¸€ä¸ªå¤æ‚å¼‚æ„å›¾ï¼Œä¸€ä¸ªç›´è§‚æƒ³æ³•æ˜¯ï¼Œå¯ä»¥åˆ©ç”¨GNNå­¦ä¹ ç”¨æˆ·çš„å…´è¶£ç‰¹å¾ï¼Œæ ¹æ®ç”¨æˆ·çš„å†å²æµè§ˆæ¨èç”¨æˆ·æ›´æ„Ÿå…´è¶£çš„å•†å“ã€‚è€Œä¸”è¿™ç§æ–¹æ³•çš„æ¨èè´¨é‡ä¹Ÿæ›´é«˜ã€‚
Pinterest Letâ€™s begin with PinSage 1 GNNçš„å¼€å±±åˆ¶ä½œâ€”â€”GCN 2æŠŠGNNè®­ç»ƒç”¨çŸ©é˜µä¹˜æ³•æ¥åˆ»ç”»ï¼Œè¿™æ ·ä¼šå¯¼è‡´ä¸€ä¸ªé—®é¢˜ï¼Œæ¯ä¸€å±‚æ¯ä¸ªç‚¹éƒ½è¦ä»ä»–çš„é‚»å±…ä¸­è¯»å–feature (i.e. å…¨å›¾è®­ç»ƒ)ï¼Œå¯¼è‡´GNNçš„å¤æ‚åº¦éå¸¸é«˜ã€‚
åæ¥ï¼Œä¸€ä¸ªç‚¹åœ¨ä»–çš„éƒ¨åˆ†é‚»å±…ä¸­è¯»å–featureï¼ˆi.e. å›¾é‡‡æ ·ï¼‰å°±å¯ä»¥ä¿è¯æ¨¡å‹çš„å‡†ç¡®åº¦ï¼Œè¿™æ ·å°±å‡ä½äº†GNNè®­ç»ƒçš„æˆæœ¬ã€‚PinSageä¹Ÿæ˜¯ä¸€ä¸ªåŸºäºé‡‡æ ·çš„GNNç®—æ³•ï¼Œæ˜¯ä¸€ä¸ªæ—©æœŸåŒæ—¶ä¹Ÿéå¸¸ç»å…¸çš„GNNç®—æ³•ã€‚å’ŒGraphSageç›¸æ¯”ï¼Œæœ€å¤§çš„ä¸åŒç‚¹åœ¨äºç”¨random-walkï¼Œé‡‡æ ·çš„å­å›¾çš„è´¨é‡ä¼šå¥½ä¸€äº›ã€‚
æ¯”å¦‚ä¸Šå›¾å°±æ˜¯ä¸€ä¸ªä¸¤å±‚çš„GNN, åœ¨é‡‡æ ·å®Œæˆåæˆ‘ä»¬ä¼šå¾—åˆ°å¾ˆå¤šä¸ªå­å›¾ï¼ˆi.e. mini-batchï¼‰å¹¶å–‚ç»™ç½‘ç»œè®­ç»ƒã€‚æ¯å±‚ç½‘ç»œéƒ½æ˜¯å¦‚ä¸‹å›¾æ‰€ç¤ºçš„å›¾å·ç§¯æ“ä½œï¼Œé€šè¿‡èšåˆç‰¹å¾ï¼ˆe.g. å–å¹³å‡ï¼Œæ±‚å’Œï¼‰å†é€šè¿‡ä¸€å±‚ç¥ç»ç½‘ç»œå¾—åˆ°ä¸€ä¸‹å±‚çš„è¾“å…¥ã€‚å°†å¤šå±‚å›¾å·ç§¯stackåˆ°ä¸€èµ·å°±æ„æˆäº†æ•´ä¸ªGNNï¼Œä¸€èˆ¬åªæœ‰2-3å±‚ã€‚
ç„¶è€Œè¿™å’Œæ¨èç³»ç»Ÿæœ‰ä»€ä¹ˆå…³ç³»å‘¢ï¼Ÿåœ¨Pinterestä¸­ï¼Œæœ‰å¾ˆå¤špinï¼ˆç±»ä¼¼æ·˜å®çš„å•†å“ï¼Œåœ¨æ¨èç³»ç»Ÿä¸­ä¹Ÿç§°ä¹‹ä¸ºitemï¼‰ï¼Œæ¯ä¸ªitemä¼šåŒ…å«å›¾ç‰‡ã€æ–‡æœ¬ä¿¡æ¯ï¼Œå°†å›¾ç‰‡å’Œæ–‡æœ¬çš„embeddingæ‹¼æ¥åˆ°ä¸€èµ·å¾—åˆ°itemçš„åˆå§‹ç‰¹å¾å‘é‡ã€‚åœ¨è®­ç»ƒå®ŒGNNä¹‹åï¼Œé€šè¿‡æ¨ç†å¾—åˆ°æ¯ä¸ªitemçš„åµŒå…¥å‘é‡ï¼Œä¹‹åæ¨èç³»ç»Ÿå°±å¯ä»¥æ ¹æ®embeddingå‘ç”¨æˆ·æ¨èæ–°çš„itemã€‚
Recoommandation System at Pinterest åˆ°æ¨èç³»ç»Ÿä¸­ï¼Œæˆ‘ä»¬ä¼šè®¤ä¸ºæ¯ä¸ªitemçš„embeddinå‘é‡æ˜¯é€šè¿‡ä¸€ä¸ªé»‘ç®±è¿‡ç¨‹ï¼ˆi.e. PinSageï¼‰ï¼Œæ˜¯æå‰å·²çŸ¥çš„ 3ã€‚æˆ‘ä»¬çš„é—®é¢˜æ˜¯ï¼ŒçŸ¥é“ç”¨æˆ·ç‚¹å‡»itemå†å²åºåˆ—$\mathcal{A}=\{a_1, a_2, â€¦\}$ï¼Œæˆ‘ä»¬æƒ³ä»$\mathcal{P}=\{p_1, p_2, â€¦\}$ä¸­é¢„æµ‹ä¸‹ä¸€ä¸ªç”¨æˆ·å¯èƒ½æ„Ÿå…´è¶£çš„å•†å“ã€‚
æˆ‘ä»¬å¯ä»¥æƒ³åˆ°ä¸€äº›å¾ˆç›´è§‚çš„æ–¹æ³•ï¼Œæ¯”å¦‚å†å²çš„itemæ±‚å¹³å‡ï¼Œè¿˜å¯ä»¥æŒ‰æ—¶é—´ç»™ä¸€ä¸ªæƒé‡ã€‚ä½†æ˜¯è¿™æ ·çš„æ–¹æ³•æŠŠç”¨æˆ·çš„embeddingé™åˆ¶åœ¨ä¸€ä¸ªæœ‰é™çš„å‘é‡é‡Œé¢ï¼Œæ•ˆæœä¸æ˜¯å¾ˆå¥½ï¼Œå› ä¸ºä¸€ä¸ªç”¨æˆ·å…´è¶£é¢æ˜¯æ˜¯å¾ˆå¹¿çš„ï¼Œå¯¹ä¸åŒç§ç±»çš„å•†å“æœ‰ä¸åŒçš„å–œå¥½ã€‚PinnerSage 3 ä¼šç»™ç”¨æˆ·ç»´æŠ¤ä¸€ä¸ªä¸é™å¤§å°çš„embeddingï¼Œä¸åŒçš„ç§ç±»çš„å–œå¥½éƒ½å¯¹åº”åˆ°ä¸€ä¸ªåµŒå…¥å‘é‡ã€‚
ç„¶è€Œè¿˜æœ‰å¦å¤–ä¸€ä¸ªé—®é¢˜â€”â€”ç”¨æˆ·çš„å†å²åºåˆ—ä¼šå¾ˆé•¿ï¼Œè®¡ç®—çš„å¤æ‚åº¦ä¼šéå¸¸å¤§ï¼Œå½±å“æ¨èçš„ç³»ç»Ÿçš„å»¶è¿Ÿã€‚PinnerSageé‡‡ç”¨çš„æ–¹æ³•æ˜¯ï¼Œé€šè¿‡èšç±»ï¼Œæ¯ä¸ªå•†å“éƒ½å¯ä»¥ç”¨ä¸€ä¸ªç±»ä¸­å¿ƒæ¥è¡¨ç¤ºã€‚åœ¨æ¨èçš„æ—¶å€™ï¼Œæ ¹æ®ç”¨æˆ·çš„actionå†ç»™è¿™äº›ç±»ä¸­å¿ƒä¸€ä¸ªé‡è¦æ€§è¯„åˆ†ã€‚æœ€åç”¨æœ€é‡è¦çš„ç±»ï¼ˆe.g. top 3ï¼‰å»é¢„æµ‹ä¸‹ä¸€ä¸ªitemã€‚
æ€»ç»“ä¸€ä¸‹PinnerSageçš„æ¨èè¿‡ç¨‹åˆ†ä¸º3æ­¥ï¼š
ç”¨æˆ·å†å²åŠ¨ä½œåºåˆ—èšç±» å¾—åˆ°ç±»ä¸­å¿ƒåµŒå…¥å‘é‡ï¼ˆMedoid basedï¼‰ æ ¹æ®time decayè®¡ç®—ç±»çš„é‡è¦åº¦ æ‰¾å“ªä¸€ä¸ªitemæœ€åˆé€‚æ˜¯ä¸€ä¸ªç´¢å¼•è¿‡ç¨‹ï¼Œä¸€èˆ¬ä¼šé€šè¿‡cacheåŠ é€ŸæŸ¥è¯¢ã€‚ä¸ºäº†å…¼é¡¾ç”¨æˆ·çš„é•¿æœŸå…´è¶£å’Œç³»ç»Ÿå»¶è¿Ÿï¼ŒPinnerSageå°†ä»»åŠ¡åˆ†æˆä¸¤ç±»ï¼Œdailyå’Œonlineã€‚åœ¨æ¯å¤©PinnerSageéƒ½ä¼šæŠŠç”¨æˆ·çš„å†å²åŠ¨ä½œè¿›è¡Œèšç±»çš„ï¼Œå¾—åˆ°ç±»ä¸­å¿ƒå’Œé‡è¦åº¦ï¼Œè¿™æ ·å¯ä»¥ä¿è¯å’Œç”¨æˆ·å…´è¶£ã€‚è€Œåœ¨onlineæ¨èçš„æ—¶å€™ï¼Œåªä¼šå¯¹ç”¨æœ€æ–°çš„åŠ¨ä½œåœ¨å·²æœ‰çš„ç±»ä¸Šrefineï¼Œé™ä½æ¨èçš„å»¶è¿Ÿã€‚
AliGraph 4 å›¾æ•°æ®è§„æ¨¡çš„å¢å¤§ç»™GNNè®­ç»ƒå¸¦æ¥æ–°çš„æŒ‘æˆ˜ï¼Œåœ¨å·¥ä¸šç•Œï¼Œå›¾çš„è§„æ¨¡ä¼šéå¸¸å¤§ï¼Œç‚¹å’Œè¾¹å¾€å¾€æ˜¯billioné‡çº§çš„ã€‚Aliåæ‹¥æœ€å¤§çš„ç”µå•†å¹³å°ä¹‹ä¸€ï¼Œå¤§è§„æ¨¡å›¾ç¥ç»ç½‘ç»œæ—¢æœ‰çœŸå®çš„åœºæ™¯ï¼ŒåŒæ—¶ä¹Ÿæ˜¯ä¸€ä¸ªäºŸé¡»è§£å†³çš„é—®é¢˜ã€‚
AliGraphæ˜¯aliçš„ä¸€ä¸ªå›¾ç¥ç»ç½‘ç»œæ¡†æ¶ã€‚ä»ç³»ç»Ÿçš„è§’åº¦æ¥çœ‹ï¼ŒAliGraphéœ€è¦ä¸ºä¸Šå±‚ç”¨æˆ·æä¾›åº”æœ‰çš„æ”¯æ’‘ï¼Œä½¿å¾—ä¸Šå±‚ç®—æ³•å’Œåº”ç”¨å¼€å‘å¯ä»¥ä»…ä»…å…³æ³¨è‡ªèº«çš„é€»è¾‘ï¼Œè€Œä¸ç”¨æ‹…å¿ƒèµ„æºå¦‚ä½•åˆ†é…çš„é—®é¢˜ã€‚
é¢å¯¹è¶…å¤§è§„æ¨¡çš„å›¾ï¼ŒAliGraphé€šè¿‡paritionæŠŠå›¾åˆ†å¸ƒå¼å­˜åœ¨é›†ç¾¤ä¸Šï¼Œè§£å†³äº†å­˜å‚¨çš„é—®é¢˜ã€‚åŒæ—¶é€šè¿‡ç»´æŠ¤cacheï¼Œå°½å¯èƒ½å‡å°‘partitionä¹‹é—´çš„é€šè®¯å¼€é”€ã€‚åŒæ—¶AliGraphè¿˜éœ€è¦å®ç°å¸¸è§çš„ç®—å­æ¥æ”¯æŒä¸Šå±‚GNNåº”ç”¨ã€‚AliGraphä¹Ÿè¿›è¡Œäº†å¼€æºï¼ŒGraphLearn 5ï¼ŒåŒæ—¶æ”¯æŒæ¨ç†å’Œè®­ç»ƒä»»åŠ¡ã€‚
GNNè®­ç»ƒåŸºæœ¬éƒ½æ˜¯å¤§åŒå°å¼‚ï¼Œè€Œæ¨ç†ä»»åŠ¡æ˜¯éƒ¨ç½²å’Œè½åœ°ä¸­ä¸»è¦workloadï¼Œè€Œä¸”å¤§éƒ¨åˆ†çš„è®¡ç®—èµ„æºä¹Ÿæ˜¯èŠ±åœ¨æ¨ç†ä¸Šã€‚è€ƒè™‘åˆ°çœŸå®åœºæ™¯ä¸‹ï¼Œå›¾ä¸€èˆ¬æ˜¯åŠ¨æ€ï¼ˆe.g. æ–°ç”¨æˆ·çš„åŠ å…¥ï¼‰ï¼ŒGraphLearnåæ¥å¢åŠ äº†Dynamic Graph Service (DGS)æ¥æ”¯æŒåŠ¨æ€å›¾çš„æ¨ç†ä»»åŠ¡ã€‚
æ•´ä¸ªç³»ç»Ÿé€šè¿‡å¾®æœåŠ¡çš„æ–¹å¼è¿è¡Œï¼Œæ¯ä¸ªæ¨¡å—è¢«æ‹†åˆ°subservicesï¼Œæ¨¡å—ä¹‹é—´éƒ½é€šè¿‡é˜Ÿåˆ—è¿æ¥èµ·æ¥ï¼ˆe.g. kafkaï¼‰ã€‚
ç¾å›¢å¹¿å‘Šæ¨è 6 å¯ä»¥å‘ç°åœ¨å’ŒPinterestçš„æ¨èç³»ç»Ÿå…¶å®åœ¨è®¾è®¡ä¸Šæœ‰å¾ˆå¤šå…±åŒç‚¹ã€‚
ç¾å›¢åœ¨æ¨èä»»åŠ¡ä¸­æœ‰ä¸¤ä¸ªè§‚å¯Ÿç‚¹ï¼šæ•°æ®æ ·æœ¬ç¨€ç–ï¼Œå¹¿å‘ŠæŠ•æ”¾åç‚¹å‡»é‡éå¸¸å°‘ï¼›ç”¨æˆ·å…´è¶£å­˜åœ¨æ—¶ç©ºç‰¹ç‚¹ï¼Œåœ¨ä¸åŒæ—¶é—´ç‚¹å’Œåœ°ç‚¹ç”¨æˆ·æœ‰ä¸åŒçš„å…´è¶£ç‚¹ã€‚é€šè¿‡å¼‚æ„å›¾æ„å»ºã€æ³¨æ„åŠ›æœºåˆ¶ç­‰æ–¹æ³•è§£å†³çš„æ¨èä¸å‡†ç¡®çš„é—®é¢˜ã€‚
æ•´ä¸ªæ¨èä¹Ÿåˆ†æˆonlineä»»åŠ¡ï¼Œä¿è¯è¯·æ±‚ä½å»¶è¿Ÿï¼›ä»¥åŠofflineä»»åŠ¡ï¼Œç”¨æ¥æ›´æ–°å›¾èŠ‚ç‚¹embeddingï¼Œå­¦ä¹ ç”¨æˆ·çš„é•¿æœŸå…´è¶£ã€‚è€Œæ•´ä¸ªç³»ç»Ÿçš„éƒ¨ç½²æ–¹å¼å’ŒGraphLearnä¹Ÿæœ‰ä¸€äº›ç›¸ä¼¼æ€§ã€‚
Challenges still exist åœ¨å¾ˆå¤šä¸šåŠ¡åœºæ™¯ä¸‹ï¼Œå›¾å¹¶ä¸æ˜¯é™æ€ä¸å˜çš„è€Œæ˜¯å‘ˆç°å‡ºä¸€ç§æ—¶é—´ç‰¹å¾ï¼Œä¸€äº›ç‚¹åœ¨$t_0$æ—¶åŠ å…¥ï¼Œä¹‹ååœ¨$t_1$æ—¶åˆ é™¤ã€‚ä½†æ˜¯æ—¶åºå›¾GNNï¼ˆTGNNï¼‰ä»ç„¶æ˜¯ä¸€ä¸ªopençš„é—®é¢˜ 7ã€‚åœ¨è¿‘å‡ å¹´GNNçš„å‘å±•ä¸­ï¼Œå¼€æ”¾çš„æ ‡å‡†æ•°æ®é›†ï¼ˆe.g. OGB 8ï¼‰æœ‰ç€å·¨å¤§çš„è´¡çŒ®ï¼Œä¸è®ºæ˜¯GNNç®—æ³•è¿˜æ˜¯GNNç³»ç»Ÿå¼€å‘ï¼Œéƒ½ä¼šå°†OGBä½œä¸ºæ•°æ®é›†å’Œå…¶ä»–baselineæ¯”è¾ƒã€‚ç„¶è€Œç›®å‰TGNNå¹¶æ²¡æœ‰å¯¹åº”çš„æ ‡å‡†æ•°æ®é›†ï¼Œè¿™æ ·æˆ‘ä»¬å¾ˆéš¾å»æ¯”è¾ƒä¸åŒæ¥è‡ªä¸åŒå›¢é˜Ÿçš„å·¥ä½œã€‚å¦ä¸€ä¸ªæ–¹é¢ï¼ŒGNNçš„æ”¶æ•›æ€§å’Œè¡¨è¾¾èƒ½åŠ›æ˜¯å¯ä»¥è¢«è¯æ˜çš„ï¼Œä½†æ˜¯TGNNè¿˜æ˜¯ä¸€ä¸ªç›¸å¯¹è¾ƒæ–°çš„ç®—æ³•ï¼Œå¹¶æ²¡æœ‰GNNæˆç†Ÿï¼Œç¼ºå°‘åŸºç¡€çš„ç†è®ºæ”¯æ’‘ã€‚
GNNè™½ç„¶ç½‘ç»œå±‚æ•°å°‘ï¼Œè®¡ç®—èµ„æºéœ€æ±‚ä¸å¤§ï¼Œä½†æ˜¯å›¾å’Œç‰¹å¾éœ€è¦å ç”¨å¤§é‡çš„å­˜å‚¨èµ„æºï¼Œè¿™ç»™GNNéƒ¨ç½²å’Œè½åœ°å¸¦æ¥äº†ä¸€äº›æŒ‘æˆ˜ 9ã€‚
...</p></div><footer class=entry-footer><span title='2023-03-18 00:00:00 +0000 UTC'>ğŸ“ March 18, 2023</span>&nbsp;Â·&nbsp;âŒ› 1 min</footer><a class=entry-link aria-label="post link to GNN Application in Recommendation" href=https://Anlarry.github.io/posts/paper-reading/gnn-application-in-recommendation/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Unicode with xelatex</h2></header><div class=entry-content><p>Unicodeä¸°å¯Œäº†æ—¥å¸¸ä½¿ç”¨çš„å­—ç¬¦é›†, è®©æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€ç§ç®€å•ä¾¿æ·çš„æ–¹å¼è¡¨è¾¾å„ç§å¥‡æ€ªçš„å­—ç¬¦, æ¯”å¦‚æƒ³è¦åœ¨è¾“å…¥ä¸€ä¸ªé›ªäººSnowman, U+2603
â˜ƒ latexä½œä¸ºæ—¥å¸¸ä½¿ç”¨çš„æ’ç‰ˆå·¥å…·, æ€ä¹ˆåœ¨latexä¸­æ’å…¥ä¸€ä¸ªunicode? ä¸€èˆ¬æ¥è®², åº”è¯¥Ctrl+C, Ctrl+Vå°±å¯ä»¥, æˆ‘ä»¬æ¥çœ‹çœ‹ä¸‹é¢çš„ä»£ç 
\documentclass[utf8]{article} \begin{document} \huge Unicode char \texttt{U+13105} is ğ“„… Unicode char \texttt{U+16E4} is á›¤ Unicode char \texttt{U+25E6} is â—¦ \end{document} ç„¶è€Œè¾“å‡ºçš„PDFä¸­å¹¶æ²¡æœ‰åŒ…å«æ‰€æœ‰çš„Unicodeå­—ç¬¦, çœ‹èµ·æ¥è¿™ä¸ªé—®é¢˜è¿˜å­˜åœ¨ä¸€å®šçš„å…±æ€§unicode-characters-not-displaying-in-xetex, è€Œä¸”ä¼¼ä¹æ˜¯ä¸ªå­—ä½“é—®é¢˜.
Tex Engineä½¿ç”¨xelatex
æˆ‘ä»¬æ¥è¯•è¯•æ›´æ¢ä¸ºFreeMonoå­—ä½“
\documentclass[utf8]{article} \usepackage{fontspec} \setmainfont{FreeMono} \begin{document} \huge Unicode char \texttt{U+13105} is ğ“„… Unicode char \texttt{U+16E4} is á›¤ Unicode char \texttt{U+25E6} is â—¦ \end{document} Ha!ç°åœ¨á›¤å·²ç»å¯ä»¥æ­£å¸¸æ˜¾ç¤ºäº†, ğ“„…å´å˜æˆäº†ä¸€ä¸ªå¥‡æ€ªå­—ç¬¦. å…¶å®è¿™æ˜¯å› ä¸ºåœ¨FreeMonoå­—ä½“ä¸­ç¼ºå¤±å­—ç¬¦ğ“„…, è€Œá›¤ä¹‹æ‰€ä»¥èƒ½æ˜¾ç¤ºæ˜¯å› ä¸ºFreeMonoåŒ…å«äº†è¿™ä¸ªå­—ç¬¦.
...</p></div><footer class=entry-footer><span title='2022-11-10 00:00:00 +0000 UTC'>ğŸ“ November 10, 2022</span>&nbsp;Â·&nbsp;âŒ› 1 min</footer><a class=entry-link aria-label="post link to Unicode with xelatex" href=https://Anlarry.github.io/posts/tool/xelatexunicode/></a></article><article class=post-entry><figure class=entry-cover><img loading=lazy srcset='https://Anlarry.github.io/posts/paper-reading/flexsc/2021-12-10-20-03-50_hu_fcae5ec609e3755.png 360w,https://Anlarry.github.io/posts/paper-reading/flexsc/2021-12-10-20-03-50_hu_3120cec3cfd8c6d5.png 480w,https://Anlarry.github.io/posts/paper-reading/flexsc/2021-12-10-20-03-50_hu_d34d1c6ae9482cc4.png 720w,https://Anlarry.github.io/posts/paper-reading/flexsc/2021-12-10-20-03-50_hu_a827192f3dc2ca86.png 1080w,https://Anlarry.github.io/posts/paper-reading/flexsc/2021-12-10-20-03-50.png 1494w' src=https://Anlarry.github.io/posts/paper-reading/flexsc/2021-12-10-20-03-50.png sizes="(min-width: 768px) 720px, 100vw" width=1494 height=560 alt></figure><header class=entry-header><h2 class=entry-hint-parent>FlexSC</h2></header><div class=entry-content><p>System Call Cost åº”ç”¨ç¨‹åºé€šè¿‡System Callå‘kernelè¯·æ±‚æœåŠ¡ã€‚ä¸€èˆ¬åº”ç”¨ç¨‹åºå‘èµ·ç³»ç»Ÿè°ƒç”¨åï¼Œä»ç”¨æˆ·æ€è¿›å…¥å†…æ ¸æ€ï¼Œæœ€åä»å¼‚å¸¸é€€å‡ºï¼Œè¿”å›ç”¨æˆ·æ€ã€‚
ä½†æ˜¯è¿™ç§åŒæ­¥çš„ç³»ç»Ÿè°ƒç”¨æœºåˆ¶å¯èƒ½å¯¹åº”ç”¨çš„æ€§èƒ½å¸¦æ¥é™åˆ¶ï¼š
Direct Cost: åœ¨ç³»ç»Ÿè°ƒç”¨åï¼ŒCPUä¼šæ¸…ç©ºæµæ°´çº¿ã€‚ Indirect Cost: ç¨‹åºçš„å±€éƒ¨æ€§ä»¥åŠcacheå¯ä»¥æå‡æ€§èƒ½ã€‚ä½†æ˜¯åœ¨ç³»ç»Ÿè°ƒç”¨åï¼Œè¦åœ¨kernelç©ºé—´æ‰§è¡Œä»£ç ï¼Œè¿™å°±ä¼šå½±å“cacheæ€§èƒ½ã€‚è€Œä¸”åœ¨kernelå¤„ç†ç»“æŸè¿”å›ç”¨æˆ·åï¼Œç›¸æ¯”ä¸åŸæ¥çš„cacheï¼Œcacheå—åˆ°äº†æ±¡æŸ“ï¼Œå¸¦æ¥é—´æ¥æ€§èƒ½æŸå¤±ã€‚ å¯ä»¥çœ‹åˆ°åœ¨ç³»ç»Ÿè°ƒç”¨åï¼ŒIPC(Instructions Per Cycle)é™ä½ã€‚
Exception-Less System Call exception-lessç³»ç»Ÿè°ƒç”¨ï¼Œè®©ç³»ç»Ÿè°ƒç”¨å¼‚æ­¥å®Œæˆã€‚åœ¨userå’Œkernelå…±äº«ä¸€äº›syscall pagesï¼Œç”¨è¿™äº›syscall pageè®°å½•å½“å‰è¯·æ±‚çš„ç³»ç»Ÿè°ƒç”¨ã€‚ç”¨æˆ·å‘èµ·ç³»ç»Ÿè°ƒç”¨åï¼Œåœ¨syscall pagesä¸­æ·»åŠ æ–°çš„entryåå°±å¯ä»¥è¿”å›ã€‚åŒæ—¶ï¼Œæœ‰ä¸€äº›ç‰¹æ®Šçš„kernel threadï¼Œsyscall threadï¼Œåœ¨syscall pagesä¸­æ‰¾åˆ°è¯·æ±‚çš„ç³»ç»Ÿè°ƒç”¨ï¼ŒæŠŠè¿”å›å€¼å†™åœ¨ç›¸åº”çš„æ¡ç›®ã€‚æœ€åç”¨æˆ·å°±é€šè¿‡å¯ä»¥æ£€æŸ¥syscall pagesï¼Œæ‹¿åˆ°è¿”å›å€¼ã€‚
é‚£è¿™ç§å°†invokeå’Œexecuteè§£è€¦çš„è®¾è®¡æ€ä¹ˆåšæœ‰ä»€ä¹ˆå¥½å¤„å‘¢ï¼Ÿ
å¯ä»¥æ¨è¿Ÿæ‰§è¡Œï¼ŒæŠŠsyscallæŒ‰batchæ‰§è¡Œï¼Œé™ä½modeä¹‹é—´è½¬åŒ–çš„ä»£ä»·ï¼Œimprove temporal localityã€‚ å¯¹äºå¤šæ ¸ç³»ç»Ÿï¼Œå¯ä»¥æŠŠsyscallæ”¾åœ¨å¦ä¸€ä¸ªæ ¸ä¸Šæ‰§è¡Œï¼Œè¿™æ ·å°±å¯ä»¥é™ä½é—´æ¥ä»£ä»·ï¼Œimproved spatial localityã€‚ Implementation åœ¨å®ç°æ—¶ï¼Œä½œè€…æ·»åŠ ä¸¤ä¸ªæ–°çš„ç³»ç»Ÿè°ƒç”¨ï¼Œéƒ½é‡‡ç”¨åŒæ­¥çš„ç³»ç»Ÿè°ƒç”¨æœºåˆ¶ã€‚
flexsc_registerï¼Œåšä¸€äº›syscall pageçš„æ˜ å°„ï¼Œå¹¶åˆ›å»ºsyscall threadï¼Œæ•°é‡ç­‰äºpageä¸­entryçš„æ•°é‡ã€‚ flexsc_waitï¼Œå› ä¸ºè¿™ç§å¼‚æ­¥æœºåˆ¶ï¼Œä¼šå‡ºç°ç”¨æˆ·éœ€è¦åœä¸‹æ¥ç­‰å¾…ç³»ç»Ÿè°ƒç”¨çš„å®Œæˆã€‚ syscall threadçš„è°ƒåº¦ï¼Œä¼šå½±å“exception-less syscallçš„æ€§èƒ½ã€‚å¯¹äºå•æ ¸ï¼Œè°ƒç”¨flexsc_waitåï¼Œè°ƒåº¦syscall threadå¤„ç†pageä¸­æ¯ä¸ªentryï¼Œå¦‚æœå‡ºç°é˜»å¡ï¼Œå°±ç”¨æ–°çš„syscall threadæ¥ç€å¤„ç†ä¸€ä¸‹ä¸ªentryã€‚å¤šæ ¸æ—¶ï¼Œone syscall thread per application and coreï¼Œè¿™æ ·å°±å¸¦æ¥äº†å¹¶è¡Œå¤„ç†çš„å¯èƒ½ã€‚
FlexSC Threads ä½†æ˜¯è¿™æ ·å¼‚æ­¥æ–¹å¼ï¼Œå¯èƒ½ä¼šè®©ä½¿ç”¨å˜å¾—å¤æ‚ï¼Œè€Œä¸”éšç€å¤šæ ¸çš„å‘å±•ï¼Œä½œè€…å°±å®ç°äº†FlexSC-Threadsã€‚åˆ©ç”¨dynamic loadingï¼Œç³»ç»Ÿè°ƒç”¨æ—¶ï¼Œè°ƒç”¨ä¸€ä¸ªwrapperï¼Œè¿™æ ·å°±å¯ä»¥è®©åº”ç”¨å¾—åˆ°free lunchã€‚
ç»´æŠ¤$M$ä¸ªuser-mod threadï¼Œå¯¹ä¸€ä¸ªprocessï¼Œæ¯ä¸ªæ ¸ä¸Šåªæœ‰ä¸€ä¸ªå¯ä»¥è¢«kernelçœ‹è§ã€‚å‘èµ·ç³»ç»Ÿè°ƒç”¨çš„çº¿ç¨‹ï¼Œåœ¨å†™å¥½entryåï¼Œå°±ä¼šè¢«åˆ‡æ¢æ‰§è¡Œä¸€ä¸‹threadã€‚ç”¨å®Œreadyçš„user-mode threadï¼Œå°±çœ‹çœ‹syscall pageä¸Šæœ‰æ²¡æœ‰å®Œæˆçš„ã€‚å¦‚æœè¿˜æ²¡æœ‰readyçš„ï¼Œå°±éœ€è¦è°ƒç”¨ä¸‹flexsc_waitã€‚
å¯¹äºè¿™ç§è®¾è®¡ï¼Œéœ€è¦æé«˜å¹¶å‘ï¼Œæ¥æå‡æ€§èƒ½ã€‚highly threaded workloadsæ˜¯FlexSC-Threadsçš„ç†æƒ³ç¯å¢ƒã€‚
Reference
[1] Soares L, Stumm M. FlexSC: Flexible System Call Scheduling with Exception-Less System Calls[C]//Osdi. 2010, 10: 33-46.</p></div><footer class=entry-footer><span title='2021-12-10 00:00:00 +0000 UTC'>ğŸ“ December 10, 2021</span>&nbsp;Â·&nbsp;âŒ› 1 min</footer><a class=entry-link aria-label="post link to FlexSC" href=https://Anlarry.github.io/posts/paper-reading/flexsc/></a></article><article class=post-entry><figure class=entry-cover><img loading=lazy srcset='https://Anlarry.github.io/posts/paper-reading/nextdoor/image-20211114121110605_hu_4c8f8b5cece3e864.png 360w,https://Anlarry.github.io/posts/paper-reading/nextdoor/image-20211114121110605_hu_d2c4a65e3d65ba1e.png 480w,https://Anlarry.github.io/posts/paper-reading/nextdoor/image-20211114121110605_hu_8a72a66650bdfd64.png 720w,https://Anlarry.github.io/posts/paper-reading/nextdoor/image-20211114121110605.png 880w' src=https://Anlarry.github.io/posts/paper-reading/nextdoor/image-20211114121110605.png sizes="(min-width: 768px) 720px, 100vw" width=880 height=831 alt></figure><header class=entry-header><h2 class=entry-hint-parent>NextDoor</h2></header><div class=entry-content><p>Background åŸºæœ¬å„ç§ä¸œè¥¿éƒ½å¯ä»¥ç”¨å›¾æ¥è¡¨ç¤ºï¼Œä¹Ÿå°±ä¿ƒæˆäº†GNNçš„å¿«é€Ÿå‘å±•ã€‚ç„¶è€Œå¾ˆå¤šå›¾éƒ½æœ‰è¿™æ ·çš„ç‰¹ç‚¹ï¼Œä¸€äº›èŠ‚ç‚¹çš„åº¦æ•°å¾ˆé«˜ç„¶è€Œå¤§å¤šæ•°èŠ‚ç‚¹çš„åº¦æ•°å¾ˆä½ã€‚
è®­ç»ƒæ—¶è¦ç”¨é‚»å±…æ›´æ–°å½“å‰èŠ‚ç‚¹ï¼Œä¸èƒ½å°†æ•´ä¸ªå›¾å…¨éƒ¨æ‹¿æ¥è®­ç»ƒï¼Œå› æ­¤ä¸€èˆ¬é‡‡ç”¨graph sampling+mini batchï¼Œæ¯”å¦‚ï¼Œç»™$n$ä¸ªèŠ‚ç‚¹ï¼Œæ¯ä¸ªèŠ‚ç‚¹å¯¹é‚»å±…é‡‡æ ·ååœ¨è¿›è¡Œè®­ç»ƒã€‚
ç„¶è€Œäº§ç”Ÿäº†æ–°çš„é—®é¢˜ï¼Œé‡‡æ ·åœ¨æ•´ä¸ªè®­ç»ƒè¿‡ç¨‹ä¸­å äº†å¾ˆå¤šæ—¶é—´ã€‚
å› æ­¤ï¼Œå¤§å®¶ä¹Ÿä¼šå»æƒ³ç”¨GPUåŠ é€Ÿé‡‡æ ·ï¼Œä½†æ˜¯naiveçš„æ–¹æ³•å¹¶ä¸èƒ½å¾ˆå¥½çš„åˆ©ç”¨GPUã€‚
â€œTransit-Parallelismâ€ ä½œè€…é¦–å…ˆå¯¹é‡‡æ ·è¿›è¡Œäº†æŠ½è±¡ï¼Œé‡‡æ ·ä»ä¸€èŠ‚ç‚¹å¼€å§‹ï¼Œæ‰©å±•å‡ºæ–°çš„èŠ‚ç‚¹åŠ å…¥sampleï¼Œå†ä»æ–°çš„èŠ‚ç‚¹æ‰©å±•$\cdots$ï¼Œæ¯æ¬¡éå†é‚»å±…æ‰©å±•æ–°èŠ‚ç‚¹çš„èŠ‚ç‚¹ï¼Œä½œè€…æŠŠå®ƒå«åš"transit vertices"
å°†é‡‡æ ·åˆ†æˆä¸¤ç±»ï¼š
Individual Transit Samplingï¼Œè¿™ä¸ªæ˜¯æŒ‰èŠ‚ç‚¹æ¥çš„ï¼Œæ¯ä¸ªtransitèŠ‚ç‚¹ä»é‚»å±…ä¸­é‡‡æ ·ä¸€å®šæ•°é‡çš„èŠ‚ç‚¹ Collective Transit Samplingï¼Œè¿™ä¸ªæ˜¯æŒ‰å±‚æ¥ï¼Œæ¯ä¸€å±‚ä»æ‰€æœ‰transitèŠ‚ç‚¹çš„é‚»å±…ä¸­é‡‡æ ·ä¸€å®šæ•°é‡çš„èŠ‚ç‚¹ CUDA & GPU
ä¸€ä¸ªCUDAç¨‹åºè¢«åˆ’åˆ†ç»™å¾ˆå¤šblocks of threadså®Œæˆå¹¶è¡Œï¼Œè€ŒGPUåˆç”±å¾ˆå¤šStreamingMultiprocessors (SMs)æ„æˆï¼Œæ¯ä¸ªblockè¢«æ”¾åˆ°SMä¸Šæ‰§è¡Œ
ä¸€ä¸ªblockçš„çº¿ç¨‹æ•°æ˜¯æœ‰é™çš„ï¼Œä½†æ˜¯ç›¸åŒçš„å¤§å°blockå¯ä»¥è¢«ç»„ç»‡æˆgridï¼Œäºæ˜¯kernel(a c++ function)å°±å¯ä»¥ç”¨gridé‡Œé¢æ‰€æœ‰çš„çº¿ç¨‹ã€‚ $$ thread \xrightarrow[]{array} block \xrightarrow[]{array} grid $$ ä¼—æ‰€å‘¨çŸ¥ï¼Œå†…å­˜å±‚æ¬¡ç»“æ„ï¼ŒGPUå½“ç„¶ä¹Ÿæœ‰ï¼š
å‰é¢å·²ç»æåˆ°äº†blockä¼šåœ¨SMä¸Šæ‰§è¡Œï¼Œåœ¨ç‰©ç†å®ç°æ—¶ä¼šç”¨åˆ°SIMT(Single-Instruction, Multiple-Thread)ã€‚multiprocessorç”¨warp(a group of 32 threads)æ¥ç®¡ç†çº¿ç¨‹ã€‚
warpä¸­çš„çº¿ç¨‹éƒ½ä»ç›¸åŒçš„èµ·ç‚¹å¼€å§‹ï¼Œä½†æ˜¯æ¯ä¸ªçº¿ç¨‹éƒ½æœ‰è‡ªå·±çš„pcï¼Œå¯„å­˜å™¨çŠ¶æ€ä¹Ÿå¯èƒ½ä¸ä¸€æ ·ã€‚è€Œä¸”ä¸€ä¸ªwarpçš„threadæ‰§è¡Œçš„æŒ‡ä»¤è¿˜æ˜¯ç›¸åŒçš„ã€‚
å¦‚æœå°±æ˜¯æ™®é€šçš„æ²¡æœ‰æ§åˆ¶æµçš„ä»£ç ï¼Œå¤§å®¶å°±ä¸€èµ·æ‰§è¡Œã€‚é‚£é‡åˆ°åˆ†æ”¯æ€ä¹ˆåŠï¼Œæ¯ä¸ªçº¿ç¨‹å¯èƒ½æœ‰ä¸åŒçš„è·¯å¾„ã€‚è¿™æ—¶å°±ä¼šå˜æˆä¸²è¡Œã€‚warpå»æ‰§è¡Œæ¯ä¸ªåˆ†æ”¯è·¯å¾„ï¼Œä¸åœ¨è·¯å¾„ä¸Šçš„threadå°±ç­‰ç€ã€‚è¿™å°±å¯èƒ½ä¼šå¾ˆå½±å“å¹¶è¡Œï¼Œä¹Ÿå°±æ˜¯Branch divergenceã€‚
Sample-Parallelismï¼Œå¯¹äºIndividual Transit Samplingå¯ä»¥å°†æ¯ä¸€å¯¹sampleå’Œtransitåˆ†é…$m_i$ä¸ªçº¿ç¨‹ï¼Œæ¯ä¸ªsampleæ”¾åˆ°ä¸€ä¸ªblocké‡Œã€‚å¯¹äºCollective Transit Samplingï¼Œéœ€è¦å…ˆæŠŠæ‰€æœ‰çš„é‚»å±…å­˜åˆ°global memoryé‡Œï¼Œå†é‡‡æ ·ã€‚
åœ¨é‡‡æ ·æ—¶ï¼Œé‚»å±…å¤šçš„èŠ‚ç‚¹è®¡ç®—çš„æ—¶é—´å°±ä¼šæ›´ä¹…ã€‚å¦‚æœåŒä¸€ä¸ªwarpé‡Œé¢çš„ä¸¤ä¸ªthreadè¢«åˆ†ç»™ä¸¤ä¸ªé‚»å±…æ•°é‡ä¸åŒçš„transitï¼Œå°±ä¼šæœ‰divergenceã€‚è€Œä¸”ï¼Œå›¾å¾—å­˜åœ¨gobal memoryï¼Œshared memoryåˆ©ç”¨ä¸å……åˆ†ã€‚
ä½†æ˜¯å¦‚æœæ˜¯æŒ‰transitåˆ’åˆ†ï¼Œå±€éƒ¨æ€§å°±ä¼šæ›´å¥½ï¼ŒæŒ‰ç…§å·¥ä½œé‡éœ€æ±‚åˆ†é…çº¿ç¨‹æ•°é‡ã€‚æ˜¯ä¸æ˜¯æœ‰ç‚¹åƒå€’æ’ç´¢å¼• :-)
çº¿ç¨‹ç»„ä¸­çš„çº¿ç¨‹ï¼Œä»–ä»¬åšçš„äº‹æƒ…æ›´ç›¸ä¼¼ï¼Œè€Œä¸”å·¥ä½œé‡ä¹Ÿå·®ä¸å¤šã€‚ä»–ä»¬è®¿é—®çš„é‚»å±…ä¹Ÿæ˜¯åŒä¸€ä¸ªtransitçš„ï¼Œèƒ½æ›´å¥½åˆ©ç”¨share memoryã€‚
Sampling Large Graphs NextDoorè¿˜å¯ä»¥å»å¯¹è¶…å‡ºGPU memoryçš„å›¾é‡‡æ ·ã€‚æ–¹æ³•æœ‰ç‚¹åƒmini batchï¼ŒæŠŠå›¾åˆ†æˆä¸ç›¸äº¤çš„å­å›¾ï¼Œæ¯æ¬¡å¯¹ä¸€ä¸ªå­å›¾å’Œå’Œå…¶transitèŠ‚ç‚¹é‡‡æ ·ã€‚
...</p></div><footer class=entry-footer><span title='2021-11-14 00:00:00 +0000 UTC'>ğŸ“ November 14, 2021</span>&nbsp;Â·&nbsp;âŒ› 1 min</footer><a class=entry-link aria-label="post link to NextDoor" href=https://Anlarry.github.io/posts/paper-reading/nextdoor/></a></article><article class=post-entry><figure class=entry-cover><img loading=lazy srcset='https://Anlarry.github.io/posts/paper-reading/active-learning-for-ml-enhanced-database-systems/image-20211021151111682_hu_d07e163860bb3005.png 360w,https://Anlarry.github.io/posts/paper-reading/active-learning-for-ml-enhanced-database-systems/image-20211021151111682_hu_ec86e622c7544256.png 480w,https://Anlarry.github.io/posts/paper-reading/active-learning-for-ml-enhanced-database-systems/image-20211021151111682_hu_1152db5d80e9acdf.png 720w,https://Anlarry.github.io/posts/paper-reading/active-learning-for-ml-enhanced-database-systems/image-20211021151111682.png 721w' src=https://Anlarry.github.io/posts/paper-reading/active-learning-for-ml-enhanced-database-systems/image-20211021151111682.png sizes="(min-width: 768px) 720px, 100vw" width=721 height=697 alt></figure><header class=entry-header><h2 class=entry-hint-parent>Active Learning for ML Enhanced Database Systems</h2></header><div class=entry-content><p>Intro & Background MLæ¨¡å‹ä¼šå› ä¸ºè®­ç»ƒå’Œæµ‹è¯•æ—¶çš„æ•°æ®åˆ†å¸ƒä¸åŒï¼Œå¯¼è‡´å¾ˆå¤šé¢„æµ‹é”™è¯¯ã€‚å°†MLæ¨¡å‹ä¼˜åŒ–databaseä¹Ÿé¢å¯¹è¿™ä¸ªé—®é¢˜ã€‚
Active learning Active leraning ä¸»åŠ¨å­¦ä¹ é‡‡ç”¨çš„æ–¹æ³•æ˜¯ï¼Œå¯ä»¥åœ¨unlabledçš„æ•°æ®ä¸­å†é€‰å‡ºä¸€äº›æ•°æ®ï¼Œä»orcaleå¾—åˆ°æ•°æ®çš„lableï¼Œä»æ–°çš„çŸ¥è¯†ä¸­å­¦ä¹ ã€‚
An illustrative example of pool-based active learning Execution cost prediction & Plan regression prediction ECPæ˜¯ä¸€ä¸ªå›å½’ä»»åŠ¡ï¼Œéœ€è¦é¢„æµ‹æ‰§è¡Œplanéœ€è¦çš„æ—¶é—´ã€‚åœ¨ä¼˜åŒ–æŸ¥è¯¢ä¸­ï¼Œå¯ä»¥ç”¨ECPæ¥å¯»æ‰¾æœ€ä¼˜çš„plan PRPæ˜¯ä¸€ä¸ªåˆ†ç±»ä»»åŠ¡ï¼Œç»™å‡ºä¸¤ä¸ªplanï¼Œéœ€è¦æ‰¾åˆ°å“ªä¸ªplanä»£ä»·æ›´é«˜ Architecture åœ¨è¿™é‡Œoracleå¯ä»¥ç”¨databaseçš„å‰¯æœ¬æ‰§è¡Œplanï¼Œè·å–plançš„æ‰§è¡Œæ—¶é—´ã€‚å› æ­¤ä¸åŒçš„planå°±æœ‰ä¸åŒçš„costã€‚
å¼€å§‹ï¼Œç”¨æˆ·æŒ‡å®šbudgetï¼Œä¹‹åADCPè·å–lableæ•°æ®æ—¶ä¼šæ¶ˆè€—budgetã€‚ADCPè·å–target dataï¼Œé€‰å‡ºunlabeled dataç»™äº¤ç»™å‰¯æœ¬æ‰§è¡Œã€‚è·å¾—æ–°çŸ¥è¯†åretrain MLæ¨¡å‹ï¼Œå†å¯¹target dataæ•°æ®è¿›è¡Œé¢„æµ‹ï¼Œè¿™æ—¶é”™è¯¯å°±ä¼šé™ä½ã€‚
ä½†æ˜¯æ–°çš„ç¯å¢ƒå°±æœ‰æ–°çš„é—®é¢˜ã€‚active learningéœ€è¦é€‰å‡ºè¦æ ‡æ³¨çš„æ•°æ®ï¼Œnoiseä¼šå¸¦æ¥ä¸€äº›é—®é¢˜ã€‚å› æ­¤éœ€è¦ç»¼åˆè€ƒè™‘costã€robustã€ä»¥åŠactive learningæœ€ä¸ç¡®å®šçš„unlabelæ•°æ®ã€‚ $$ w_x=\frac{u(x)}{c(x)} $$ $c(x)$è¡¨ç¤ºcostï¼Œ$u(x)$è¡¨ç¤ºuncertaintyï¼Œå› æ­¤xçš„æƒé‡å¯ä»¥ç†è§£æˆâ€œuncertainty per costâ€ã€‚
åŒæ—¶ä¸ºäº†è§£å†³noiseï¼Œè½¬åŒ–ä¸ºæ¦‚ç‡å¹¶åŠ å…¥Gumbelå™ªéŸ³
$$ p(x)=\frac{w_x}{\sum_{xâ€™}w_{xâ€™}} \newline {\rm arg}\ \max\limits_{x} \log p(x)+G_x $$
å¦å¤–ï¼Œè¿˜éœ€è¦å‡å°‘sampleæ—¶çš„å†—ä½™ã€‚
Algo & Example Comparison & Why it works HALç›¸æ¯”äºå…¶ä»–ALç­–ç•¥åˆ©ç”¨äº†å„ç§ä¸åŒçš„ç‰¹ç‚¹ã€‚æ„Ÿè§‰è¿™æ˜¯ä¸ºä»€ä¹ˆHALå¯ä»¥workçš„ä¸€ä¸ªåŸå› ã€‚åœ¨å®éªŒä¸­ï¼ŒOPT(A crude baseline)ç›´æ¥ç”¨costä¼°è®¡(for PRP)ï¼ŒHuberå›å½’(for ECP)å¾—åˆ°labelä¸ç”¨retrainä¹Ÿä¸éœ€è¦é¢å¤–çš„labelï¼Œæ¯”å…¶å®ƒALé”™è¯¯è¦é«˜å‡ºå¾ˆå¤šã€‚
...</p></div><footer class=entry-footer><span title='2021-10-22 16:35:00 +0800 +0800'>ğŸ“ October 22, 2021</span>&nbsp;Â·&nbsp;âŒ› 1 min</footer><a class=entry-link aria-label="post link to Active Learning for ML Enhanced Database Systems" href=https://Anlarry.github.io/posts/paper-reading/active-learning-for-ml-enhanced-database-systems/></a></article><article class=post-entry><figure class=entry-cover><img loading=lazy srcset='https://Anlarry.github.io/posts/paper-reading/skybridge--xpc/cover_hu_3932ac698f2b19d9.png 360w,https://Anlarry.github.io/posts/paper-reading/skybridge--xpc/cover_hu_d60e6a0a3bf82565.png 480w,https://Anlarry.github.io/posts/paper-reading/skybridge--xpc/cover_hu_8c4cf0d876af7055.png 720w,https://Anlarry.github.io/posts/paper-reading/skybridge--xpc/cover.png 727w' src=https://Anlarry.github.io/posts/paper-reading/skybridge--xpc/cover.png sizes="(min-width: 768px) 720px, 100vw" width=727 height=406 alt></figure><header class=entry-header><h2 class=entry-hint-parent>SkyBridge & XPC</h2></header><div class=entry-content><p>Inter-Process Communication å¾®å†…æ ¸ç›¸æ¯”ä¸å®å†…æ ¸ï¼Œå…·æœ‰æ›´å¥½çš„æ‰©å±•æ€§ã€å®‰å…¨æ€§ï¼Œä¹Ÿèƒ½å¤Ÿæ›´å¥½åœ°å®¹å¿é”™è¯¯ã€‚ä½†æ˜¯å¾®å†…æ ¸åªä¿ç•™å¾ˆåŸºæœ¬çš„åŠŸèƒ½ï¼Œå¾ˆå¤šæœåŠ¡éƒ½ä½œä¸ºä¸€ä¸ªç”¨æˆ·è¿›ç¨‹å­˜åœ¨ï¼Œè¿›ç¨‹ä¹‹é—´å¤§é‡ä½¿ç”¨IPCä¼ é€’æ¶ˆæ¯ã€‚
å¦å¤–åœ¨å®å†…æ ¸ä¸­ä¹Ÿä¼šç»å¸¸ä½¿ç”¨IPCï¼Œå¦‚Android Binderã€‚
Optimize synchronous IPC ä¸€èˆ¬IPCè¿‡ç¨‹éœ€è¦ç»è¿‡å†…æ ¸ï¼Œè¿™ä¸ªè¿‡ç¨‹éœ€è¦ä¿å­˜ç”¨æˆ·æ€çŠ¶æ€ï¼Œå½“é€€å‡ºå†…æ ¸æ—¶è¿˜éœ€æ¢å¤ç”¨æˆ·çŠ¶æ€ã€‚å› ä¸ºæ¯ä¸ªè¿›ç¨‹éƒ½åœ¨è‡ªå·±çš„è™šæ‹Ÿåœ°å€ç©ºé—´ä¸­ï¼ŒIPCè¿‡ç¨‹è¿˜éœ€è¦åˆ‡æ¢è™šæ‹Ÿåœ°å€ç©ºé—´ã€‚å¦å¤–è¿˜æœ‰ä¸€äº›é€»è¾‘éœ€è¦å¤„ç†ã€‚è¿™äº›éƒ½å¯¼è‡´IPCæœ‰è¾ƒé«˜çš„å»¶è¿Ÿã€‚
seL4ç”¨fastpathé™ä½IPCå»¶è¿Ÿï¼Œæ¶ˆæ¯ä¼šè¢«ç«‹å³å‘é€ï¼Œè®©kernelç›´æ¥åˆ‡æ¢åˆ°serverè¿›ç¨‹é¿å…äº†è°ƒåº¦å™¨ï¼Œå› æ­¤å¯ä»¥æå‡IPCæ€§èƒ½ã€‚ä½†æ˜¯ä¹Ÿæ— æ³•é¿å…kernelã€‚
å¦ä¸€æ–¹é¢å½“ä¼ é€’çš„æ¶ˆæ¯è¾ƒå¤§æ—¶ï¼ŒIPCä¸€èˆ¬éœ€è¦å°†æ¶ˆæ¯å¤åˆ¶åˆ°å†…æ ¸ï¼Œå†ä»å†…æ ¸å¤åˆ¶åˆ°å¦ä¸€ä¸ªè¿›ç¨‹ã€‚æˆ–è€…ä½¿ç”¨å…±äº«å†…å­˜ï¼Œå‡å°‘ä¸€æ¬¡å¤åˆ¶ã€‚
åœ¨seL4ä¸Šæµ‹è¯•è´Ÿè½½ï¼ŒIPCå ç”¨çš„æ—¶é—´æ˜¯å¾ˆå¤šçš„ã€‚
SkyBridge ä¸ºäº†æé«˜IPCæ€§èƒ½ï¼ŒSkyBridgeæƒ³æ³•æ˜¯IPCä¸ç»è¿‡kernel,senderå¯ä»¥ç›´æ¥è°ƒç”¨receiverçš„procedureã€‚ä¸è¿›è¿‡kernelå¦‚ä½•è°ƒç”¨receiverå‘¢ï¼Ÿä¼¼ä¹éœ€è¦ä¸€ä¸ªæ–°çš„æ¨¡å—å®Œæˆè¿™ä¸ªåŠŸèƒ½ï¼ŒSkyBridgeåˆ©ç”¨Intelä¸ºè™šæ‹ŸåŒ–æä¾›çš„ç¡¬ä»¶ï¼ŒEPT(extended page table) åˆ‡æ¢ï¼Œå…è®¸åœ¨ç”¨æˆ·æ€ä¸‹åˆ‡æ¢EPTï¼Œè¿™æ ·å°±å¯ä»¥å®ç°åœ¨ç”¨æˆ·æ€ä¸‹åˆ‡æ¢è™šæ‹Ÿåœ°å€ç©ºé—´ã€‚
ä½†æ˜¯ä¸ºäº†åˆ©ç”¨EPTåˆ‡æ¢ï¼Œå°±éœ€è¦åœ¨å¢åŠ ä¸€ä¸ªhypervisorã€‚ï¼ˆæœ‰å¯èƒ½ä¼šå½±å“æ€§èƒ½ï¼‰
åœ¨è™šæ‹Ÿæœºä¸­è¿è¡Œçš„è¿›ç¨‹ï¼Œå¦‚æœè¦è®¿é—®å†…å­˜ä¼šç»è¿‡
GVA(Guest virtual address)â¡GPA(Guest physical address)â¡HPA(Host physical address)
è¿™æ ·çš„ä¸¤çº§åœ°å€è½¬æ¢ï¼Œç»è¿‡Guesté¡µè¡¨å¾—åˆ°GPAï¼Œå†ç»è¿‡EPTå¾—åˆ°HPA
åŒæ—¶SkyBridgeä¸­çš„æ¯ä¸ªè¿›ç¨‹éƒ½åœ¨è‡ªå·±çš„è™šæ‹Ÿç©ºé—´ä¸­ï¼Œå½¼æ­¤ä¹‹é—´ç›¸äº’éš”ç¦»ã€‚å¦‚æœé€šè¿‡å°†è¿›ç¨‹æ”¾åœ¨åŒä¸€ä¸ªè™šæ‹Ÿç©ºé—´ï¼Œç„¶åç”¨EPTå°†ä»–ä»¬éš”ç¦»ï¼Œè¿™æ ·çš„è¯å½“è¿›ç¨‹æ•°å¾ˆå¤šçš„æ—¶å€™å°±ä¼šæ¯”è¾ƒå¤æ‚ã€‚
ä»ä¸Šå›¾å¯ä»¥çœ‹åˆ°SkyBridgeçš„ä¸¤ä¸ªkernelï¼šRootKernel( a tiny hypervisor)å’ŒSubKernel(å³microkernel)ã€‚
é¦–å…ˆserveråœ¨kernelä¸­æ³¨å†Œã€‚kernelä¼šå§trapoline-relatedä»£ç å’Œæ•°æ®æ˜ å°„åˆ°serverçš„è™šæ‹Ÿç©ºé—´ï¼Œå¹¶è¿”å›ä¸€ä¸ªIDç”¨æ¥ç»™clientè°ƒç”¨ã€‚clientå‘kernelæ³¨å†Œæ—¶æä¾›1server ID,kernelåŒæ ·å°†ä»£ç å’Œæ•°æ®æ˜ å°„åˆ°ä»–çš„è™šæ‹Ÿç©ºé—´ã€‚
Subkernelè°ƒç”¨Rootkernelçš„å€Ÿå£è®©serverå’Œclientåœ¨EPT levelä¸Šç»‘å®šï¼Œkernelä¼šä¸ºclientå’Œserveré…ç½®EPTã€‚é…ç½®serverçš„EPTæ—¶ï¼ŒSkyBridgeæŠŠclientçš„é¡µè¡¨æ˜ å°„åˆ°ç›¸åº”serverçš„é¡µè¡¨ã€‚clientè°ƒç”¨direct_server_callï¼Œåˆ‡æ¢è‡³serverçš„EPTåä½¿ç”¨serverçš„é¡µè¡¨ç¿»è¯‘åç»­çš„åœ°å€ã€‚trapolineä»£ç å®‰è£…serverçš„stack,è°ƒç”¨handlerã€‚
åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œclientçš„CR3(é¡µè¡¨åœ°å€)ä¸ä¼šå‘ç”Ÿæ”¹å˜ï¼ŒSkyBridgeå°†client CR3çš„HPAæ˜ å°„ä¸ºserver C3çš„HPAï¼Œè¿™æ ·å°±ç›¸å½“äºåˆ‡æ¢åˆ°äº†serverçš„ç©ºé—´ã€‚
something else RootKernel & è™šæ‹ŸåŒ–å¼€é”€ï¼ŒRootkernelåªæä¾›æœ€åŸºæœ¬çš„åŠŸèƒ½ï¼ŒåŒæ—¶ä¸ºäº†é™ä½VM exitï¼ŒRootkernelå…è®¸åƒæ›´æ”¹CR3çš„æŒ‡ä»¤ä¸è§¦å‘VM exitã€è®©å¤–éƒ¨ä¸­æ–­ç›´æ¥åˆ°microkernelå¤„ç†ã€‚ä¸ºäº†è§£å†³EPT violationï¼ŒRootkernelç”¨1GBçš„é¡µï¼ŒæŠŠå¤§éƒ¨åˆ†hostç‰©ç†å†…å­˜æ˜ å°„åˆ°microkernelï¼ˆé™¤äº†Rootkernelä¿ç•™çš„éƒ¨åˆ†ï¼Œå¤§æ¦‚100MBï¼‰ã€‚è¿™æ ·microkernelè®¿é—®ç‰©ç†åœ°å€æ—¶ï¼Œå°±ä¸ä¼šæœ‰EPT iolationã€‚è¿™æ ·ä¸ä»…é™ä½äº†å¤„ç†TLB missçš„æ—¶é—´ï¼Œä¹Ÿé™ä½äº†TLS missçš„æ¬¡æ•°ã€‚
illegal VMFUNCï¼Œå¯èƒ½ä¼šå¯¼è‡´ä¸€äº›å®‰å…¨é—®é¢˜ã€‚SkyBrdigeçš„æ–¹æ³•æ˜¯åŠŸèƒ½ç›¸åŒçš„æŒ‡ä»¤æ›¿æ¢ä¹‹å‰çš„æŒ‡ä»¤ã€‚
XPC ä½†æ˜¯SkyBridgeéœ€è¦å·¥ä½œåœ¨è™šæ‹ŸåŒ–ç¯å¢ƒä¸­ï¼Œè€Œä¸”å½“å‡ºç°è°ƒç”¨é“¾çš„æ—¶å€™ï¼ˆe.g., A$\rightarrow$B$\rightarrow$Cï¼‰è¿™æ ·å‡ºç°æ¶ˆæ¯è¢«å¤šæ¬¡å¤åˆ¶çš„æƒ…å†µã€‚
XPCä»ä¸¤ä¸ªæ–¹é¢æé«˜IPCæ€§èƒ½ï¼Œ
è®©IPCä¸ç»è¿‡kernel ä¸å¤åˆ¶ä¼ é€’æ¶ˆæ¯ å’ŒSkyBridgeä¸€æ ·XPCä¹Ÿå±äºç¡¬ä»¶ä¼˜åŒ–IPCï¼ŒSkyBridgeé€šè¿‡VMFUNC, XPCåˆ™é€šè¿‡åœ¨æ–°çš„ç¡¬ä»¶ï¼ŒXPC engineã€‚XPC engineæä¾›äº†IPCçš„åŸºæœ¬åŠŸèƒ½ï¼Œå¦‚capabilityæ£€æŸ¥ã€ä¸Šä¸‹æ–‡åˆ‡æ¢ã€é«˜æ•ˆè½»é‡çº§çš„æ¶ˆæ¯ä¼ é€’æœºåˆ¶(relay-seg)ã€‚
XPC engineæä¾›äº†ä¸¤ä¸ªç¡¬ä»¶åŸè¯­ï¼šUser-level Cross Process Callï¼ŒLightweight Message Transfer
...</p></div><footer class=entry-footer><span title='2021-09-16 19:17:00 +0000 UTC'>ğŸ“ September 16, 2021</span>&nbsp;Â·&nbsp;âŒ› 1 min</footer><a class=entry-link aria-label="post link to SkyBridge & XPC" href=https://Anlarry.github.io/posts/paper-reading/skybridge--xpc/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Codeforces Round #664</h2></header><div class=entry-content><p>Codeforces Round #664 https://codeforces.com/contest/1395
A é¢˜æ„
ç»™å››ç§é¢œè‰²çš„çƒï¼Œå¯ä»¥æŠŠä¸€ä¸ªçº¢è‰²ä¸€ä¸ªè“è‰²ä¸€ä¸ªç»¿è‰²æŸ“æˆç™½è‰²ï¼Œé—®èƒ½ä¸èƒ½å˜æˆå›æ–‡ä¸²
#include &lt;cstdio> #include &lt;stack> #include &lt;set> #include &lt;cmath> #include &lt;map> #include &lt;time.h> #include &lt;vector> #include &lt;iostream> #include &lt;string> #include &lt;cstring> #include &lt;algorithm> //#include &lt;memory.h> #include &lt;cstdlib> #include &lt;queue> #include &lt;iomanip> #include &lt;cassert> #include &lt;unordered_map> #define P pair&lt;int, int> #define LL long long #define LD long double #define PLL pair&lt;LL, LL> #define mset(a, b) memset(a, b, sizeof(a)) #define rep(i, a, b) for (int i = a; i &lt; b; i++) #define PI acos(-1.0) #define random(x) rand() % x #define debug(x) cout &lt;&lt; #x &lt;&lt; " " &lt;&lt; x &lt;&lt; "\n" using namespace std; const int inf = 0x3f3f3f3f; const LL __64inf = 0x3f3f3f3f3f3f3f3f; #ifdef DEBUG const int MAX = 2e3 + 50; #else const int MAX = 2e6 + 500; #endif const int mod = 1e9 + 7; void file_read() { #ifdef DEBUG freopen("in", "r", stdin); // freopen("out", "w", stdout); #endif } int main() { file_read(); int T; LL a, b, c, d; scanf("%d", &amp;T); while (T--) { cin >> a >> b >> c >> d; LL tot = a + b + c + d; if(tot & 1) { int odd = (a & 1) + (b & 1) + (c & 1) + (d & 1); if(odd == 1) { puts("Yes"); continue; } if(a > 0 and b > 0 and c > 0) { a--, b--, c--, d+=3; odd = (a & 1) + (b & 1) + (c & 1) + (d & 1); if(odd == 1) { puts("Yes"); continue; } } puts("No"); continue; } else { int odd = (a & 1) + (b & 1) + (c & 1) + (d & 1); if(odd == 0 ) { puts("Yes"); continue; } if(a > 0 and b > 0 and c > 0 and d > 0) { a--, b--, c--, d += 3; odd = (a & 1) + (b & 1) + (c & 1) + (d & 1); if(odd == 0) { puts("Yes"); continue; } } puts("No"); } } return 0; } B é¢˜æ„
...</p></div><footer class=entry-footer><span title='2020-09-01 19:40:00 +0000 UTC'>ğŸ“ September 1, 2020</span>&nbsp;Â·&nbsp;âŒ› 10 min</footer><a class=entry-link aria-label="post link to Codeforces Round #664" href=https://Anlarry.github.io/posts/acm-icpc/codeforces-round-664/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Gym 102501éƒ¨åˆ†é¢˜è§£</h2></header><div class=entry-content><p>Gym - 102501D Gnalcats https://codeforces.com/gym/102501/problem/D
é¢˜æ„ ç»™ä¸¤ç§æ ˆæ“ä½œåˆ¤æ–­æ˜¯å¦ç›¸ç­‰,å¦‚æœä¸¤ä¸ªæ“ä½œéƒ½failï¼Œä¹Ÿè®¤ä¸ºç›¸ç­‰
Solution æ¨¡æ‹Ÿï¼Œæ¯ä¸ªæ°¨åŸºé…¸ä¸€ä¸ªhashå€¼ã€‚é€šè¿‡åˆ¤æ–­æœ€åæ ˆå…ƒç´ æ˜¯å¦å¯¹åº”hashç›¸ç­‰ï¼Œåˆ¤æ–­æ“ä½œæ˜¯å¦ç›¸ç­‰
#include &lt;cstdio> #include &lt;stack> #include &lt;set> #include &lt;cmath> #include &lt;map> #include &lt;time.h> #include &lt;vector> #include &lt;iostream> #include &lt;string> #include &lt;cstring> #include &lt;algorithm> //#include &lt;memory.h> #include &lt;cstdlib> #include &lt;queue> #include &lt;iomanip> #include &lt;cassert> #include &lt;unordered_map> #define P pair&lt;int, int> #define LL long long #define LD long double #define PLL pair&lt;LL, LL> #define mset(a, b) memset(a, b, sizeof(a)) #define rep(i, a, b) for (int i = a; i &lt; b; i++) #define PI acos(-1.0) #define random(x) rand() % x #define debug(x) cout &lt;&lt; #x &lt;&lt; " " &lt;&lt; x &lt;&lt; "\n" using namespace std; const int inf = 0x3f3f3f3f; const LL __64inf = 0x3f3f3f3f3f3f3f3f; #ifdef DEBUG const int MAX = 2e3 + 50; #else const int MAX = 1e6 + 50; #endif const int mod = 1e9 + 7; void file_read() { #ifdef DEBUG freopen("in", "r", stdin); // freopen("out", "w", stdout); #endif } #define ULL unsigned long long struct DNA { struct Node { int l, r; unsigned LL val; Node(){} Node(int l, int r, unsigned LL val) : l(l), r(r), val(val) {} bool complex() const { return l and r; } }tr[MAX]; stack&lt;int> stk; int tot; int num; DNA() : tot(1), num(1) { for(int i = 1; i &lt;= (int)1e5; i++) { tr[tot] = Node(0, 0, num++); stk.push(tot); tot++; } } ULL hash(int u, int v) { ULL base = 131; return tr[u].val * base + tr[v].val; } bool op_C() { auto u = stk.top(); tr[tot] = tr[u]; stk.push(tot); tot++; return true; } bool op_D() { stk.pop(); return true; } bool op_L() { auto u = stk.top(); stk.pop(); if(!tr[u].complex()) return false; // tr[tot] = tr[tr[u].l]; // stk.push(tot); stk.push(tr[u].l); return true; } bool op_P() { auto u = stk.top(); stk.pop(); auto v = stk.top(); stk.pop(); tr[tot] = Node(u, v, hash(u, v)); stk.push(tot); tot++; return true; } bool op_R() { auto u = stk.top(); stk.pop(); if(!tr[u].complex()) return false; // tr[tot] = tr[tr[u].r]; // stk.push(tot++); stk.push(tr[u].r); return true; } bool op_S() { auto u = stk.top(); stk.pop(); auto v = stk.top(); stk.pop(); stk.push(u); stk.push(v); return true; } bool op_U() { auto u = stk.top(); stk.pop(); if(!tr[u].complex()) return false; stk.push(tr[u].r); stk.push(tr[u].l); return true; } bool op(const string &amp;s) { bool res = true; for(auto c : s) { switch (c) { case 'C':res &= op_C(); break; case 'D':res &= op_D(); break; case 'L':res &= op_L(); break; case 'P':res &= op_P(); break; case 'R':res &= op_R(); break; case 'S':res &= op_S(); break; case 'U':res &= op_U(); break; default: break; } } return res ; } }; DNA A, B; int main() { file_read(); string s, t; cin >> s >> t; A = DNA(); B = DNA(); bool a = A.op(s); bool b = B.op(t); if(a ^ b) { puts("False"); return 0; } if(!a and !b) { puts("True"); return 0; } while(!A.stk.empty() and !B.stk.empty()) { auto u = A.stk.top(); A.stk.pop(); auto v = B.stk.top(); B.stk.pop(); if(A.tr[u].val != B.tr[v].val) { puts("False"); return 0; } } if(!A.stk.empty() || !B.stk.empty()) { puts("False"); return 0; } puts("True"); return 0; } Gym - 102501J https://codeforces.com/gym/102501/problem/J
...</p></div><footer class=entry-footer><span title='2020-08-31 21:18:00 +0800 +0800'>ğŸ“ August 31, 2020</span>&nbsp;Â·&nbsp;âŒ› 5 min</footer><a class=entry-link aria-label="post link to Gym 102501éƒ¨åˆ†é¢˜è§£" href=https://Anlarry.github.io/posts/acm-icpc/gym-102501%E9%83%A8%E5%88%86%E9%A2%98%E8%A7%A3/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Gym 102460L Largest Quadrilateral</h2></header><div class=entry-content><p>Gym 102460L Largest Quadrilateral Largest Quadrilateral
é¢˜æ„ ç»™$n$ä¸ªç‚¹ä»ä¸­é€‰å‡ºå››ä¸ªç‚¹ï¼Œä½¿å¾—é¢ç§¯æœ€å¤§
Solution é¦–å…ˆï¼Œè‚¯å®šæ˜¯æ±‚å‡¸åŒ…ï¼Œè¦æ±‚çš„ç‚¹ä¸€å®šåœ¨å‡¸åŒ…ä¸Šã€‚ ä¸éš¾è”æƒ³åˆ°å‡¸åŒ…å¯¹æ¯ä¸ªè¾¹æ±‚æœ€å¤§ä¸‰è§’å½¢é¢ç§¯çš„é—®é¢˜ï¼Œä¹Ÿå°±æ˜¯æ—‹è½¬å¡å£³ã€‚ å¯ä»¥å°†é—®é¢˜è½¬åŒ–ä¸ºï¼Œå¯¹å‡¸åŒ…çš„æ¯ä¸€ä¸ªå¯¹è§’çº¿$A_iA_j$ï¼Œæ±‚æœ€å¤§é¢ç§¯çš„ä¸¤ä¸ªä¸‰è§’å½¢ï¼Œ$\triangle{A_iA_jP}$, $\triangle{A_iA_jQ}$, ç„¶åå°±å¯ä»¥æšä¸¾å¯¹è§’çº¿ï¼Œæ—‹è½¬å¡å£³ç®—æœ€å¤§é¢ç§¯ ç»†èŠ‚
è¾“å‡ºçš„æ ¼å¼ å‡¸åŒ…ä¸Šåº”è¯¥ç•™ä¸‹å…±çº¿çš„ç‚¹ #include &lt;cstdio> #include &lt;stack> #include &lt;set> #include &lt;cmath> #include &lt;map> #include &lt;time.h> #include &lt;vector> #include &lt;iostream> #include &lt;string> #include &lt;cstring> #include &lt;algorithm> //#include &lt;memory.h> #include &lt;cstdlib> #include &lt;queue> #include &lt;iomanip> #include &lt;cassert> // #include &lt;unordered_map> #define P pair&lt;int, int> #define LL long long #define LD long double #define PLL pair&lt;LL, LL> #define mset(a, b) memset(a, b, sizeof(a)) #define rep(i, a, b) for (int i = a; i &lt; b; i++) #define PI acos(-1.0) #define random(x) rand() % x #define debug(x) cout &lt;&lt; #x &lt;&lt; " " &lt;&lt; x &lt;&lt; "\n" using namespace std; const int inf = 0x3f3f3f3f; const LL __64inf = 0x3f3f3f3f3f3f3f3f; #ifdef DEBUG const int MAX = 2e3 + 50; #else const int MAX = 1e6 + 50; #endif const int mod = 1e9+9; void file_read(){ #ifdef DEBUG freopen("in", "r", stdin); // freopen("out", "w", stdout); #endif } template&lt;typename type> struct Vec { type x, y; Vec() {} Vec(type x, type y) : x(x), y(y) {} friend istream & operator >> (istream &amp;in, Vec &amp;A) { in >> A.x >> A.y; return in; } friend Vec operator - (const Vec &amp;A, const Vec &amp;B) { return Vec(A.x-B.x, A.y-B.y); } friend Vec operator + (const Vec &amp;A, const Vec &amp;B) { return Vec(A.x + B.x, A.y + B.y); } friend type det(const Vec &amp;A, const Vec &amp;B) { return A.x * B.y - A.y * B.x; } friend type dot(const Vec &amp;A, const Vec &amp;B) { return A.x * B.x + A.y * B.y; } friend bool operator &lt; (const Vec &amp;A, const Vec &amp;B) { if(A.x != B.x) return A.x &lt; B.x; return A.y &lt; B.y; } friend type area(const Vec &amp;A, const Vec &amp;B) { return abs(det(A, B)); } friend type operator == (const Vec &amp;A, const Vec &amp;B) { return A.x == B.x and A.y == B.y; } }; template&lt;typename type> vector&lt;Vec&lt;type>> convex_hull(vector&lt;Vec&lt;type>> &amp;pt) { sort(pt.begin(), pt.end()); int n = pt.size(); vector&lt;Vec&lt;type>> res(2*n); int k = 0 ; for(int i = 0; i &lt; n; i++) { while(k > 1 and det(res[k-1]-res[k-2], pt[i]-res[k-1]) &lt; 0) // &lt;=ä¼šwa k--; res[k++] = pt[i]; } for(int i = n-2, t = k; i >= 0; i--) { while(k > t and det(res[k-1]-res[k-2], pt[i]-res[k-1]) &lt; 0) // &lt;=ä¼šwa k--; res[k++] = pt[i]; } res.resize(k-1); return res; } struct ModI { int i, n; ModI(int n ) : i(0), n(n) { assert(n > 0) ;} ModI(int i, int n) : i(i%n), n(n) { assert(n > 0); } ModI operator ++ ( int ) { ModI row = ModI(i, n); i = (i + 1) % n; return row; } ModI operator + (int x) { ModI res = ModI(i, n); res.i = (res.i + x) % n; return res; } int operator = (int x) { return i = x; } bool operator &lt; (int x) const { return i &lt; x; } bool operator == (const ModI &amp;other) const { return i == other.i; } operator int () { return i; } }; template&lt;typename type> type area(const Vec&lt;type> &amp;A, const Vec&lt;type> &amp;B, const Vec&lt;type> &amp;C) { return area(A-B, A-C); } template&lt;typename type> type rotateCalipers(vector&lt;Vec&lt;type>> pt) { int n = pt.size(); type res = 0; for(int i = 0; i &lt; pt.size(); i++) { ModI p1 = ModI(i+1, n); ModI p2 = ModI(i+3, n); for(ModI j = ModI(i+2, n); j+1 != i; j++) { while(p1+1 != j and area(pt[p1], pt[i], pt[j]) &lt; area(pt[p1+1], pt[i], pt[j])) p1 ++; if(j == p2) p2++; while(p2+1 != i and area(pt[p2], pt[i], pt[j]) &lt; area(pt[p2+1], pt[i], pt[j])) p2 ++; auto cur = area(pt[p1], pt[i], pt[j]) + area(pt[p2], pt[i], pt[j]); res = max(res, cur); } } return res; } void out(LL ans) { if(ans & 1) { printf("%lld.5\n", ans >> 1); } else { printf("%lld\n", ans >> 1); } } int main() { file_read(); int T; scanf("%d", &amp;T); while (T--) { int n; scanf("%d", &amp;n); vector&lt;Vec&lt;LL>> pt(n); for(int i = 0; i &lt; n; i++) cin >> pt[i]; auto ch = convex_hull(pt); if(ch.size() &lt; 3) { printf("0\n"); continue; } if(ch.size() == 3) { LL ans = 0; LL A = area(ch[0], ch[1], ch[2]); for(auto p : pt) { if(p == ch[0] or p == ch[1] or p == ch[2]) continue; auto a = area(p, ch[1], ch[2]); a = min(a, area(p, ch[0], ch[2])); a = min(a, area(p, ch[0], ch[1])); ans = max(ans, A-a); } out(ans); continue; } LL res = rotateCalipers(ch); out(res); } return 0; }</p></div><footer class=entry-footer><span title='2020-08-27 00:01:00 +0800 +0800'>ğŸ“ August 27, 2020</span>&nbsp;Â·&nbsp;âŒ› 4 min</footer><a class=entry-link aria-label="post link to Gym 102460L Largest Quadrilateral " href=https://Anlarry.github.io/posts/acm-icpc/gym-102460l-largest-quadrilateral/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Codeforces Round #663</h2></header><div class=entry-content><p>Codeforces Round #663 http://codeforces.com/contest/1391
C é¢˜æ„
å¯¹äºä¸€ä¸ªæ’åˆ—${p_1, p_2, \dots, p_n}$ï¼Œå¯¹äºæ¯ä¸ªæ•°å­—$p_i$ï¼Œå‘å‰æ‰¾ç¬¬ä¸€ä¸ªå¤§äº$p_i$çš„$p_j$ï¼Œ$i$å’Œ$j$è¿ä¸€æ¡è¾¹ï¼Œå‘ååŒç†ã€‚æ±‚å¤šå°‘ç§æ’åˆ—ç”Ÿæˆçš„å›¾æ˜¯æœ‰ç¯çš„
Solution
å¯¹äº$p_i$ï¼Œå¦‚æœå­˜åœ¨$p_j>p_i(j&lt;i)$, $p_k>p_i(k>i)$ï¼Œé‚£ä¹ˆå°±æ˜¯å­˜åœ¨ç¯çš„ é‚£ä¹ˆå¯¹äº$\forall i$éƒ½ä¸æˆç«‹æ—¶ï¼Œå°±æ²¡æœ‰ç¯ æ­¤æ—¶å°±æ˜¯åºåˆ—çš„ç‰¹ç‚¹å°±æ˜¯,æ•°å­—$n$å·¦è¾¹å’Œå³è¾¹å‘ä¸¤è¾¹é€’å‡ å› æ­¤æ’åˆ—æ•°å°±æ˜¯$n!-2^{n-1}$ #include &lt;cstdio> #include &lt;stack> #include &lt;set> #include &lt;cmath> #include &lt;map> #include &lt;time.h> #include &lt;vector> #include &lt;iostream> #include &lt;string> #include &lt;cstring> #include &lt;algorithm> #include &lt;cstdlib> #include &lt;queue> #include &lt;iomanip> #include &lt;cassert> #define P pair&lt;int, int> #define LL long long #define LD long double #define PLL pair&lt;LL, LL> #define mset(a, b) memset(a, b, sizeof(a)) #define rep(i, a, b) for (int i = a; i &lt; b; i++) #define PI acos(-1.0) #define random(x) rand() % x #define debug(x) cout &lt;&lt; #x &lt;&lt; " " &lt;&lt; x &lt;&lt; "\n" using namespace std; const LL inf = 0x3f3f3f3f3f3f3f3f; #ifdef DEBUG const int MAX = 2e3 + 50; #else const int MAX = 2e6 + 50; #endif const int mod = 1e9+7; void file_read(){ #ifdef DEBUG freopen("in", "r", stdin); #endif } int main(){ file_read(); LL n; scanf("%lld\n", &amp;n); LL fact = 1; for(LL i = 1; i &lt;= n; i++) { fact = fact * i % mod; } LL pow2 = 1; for(int i = 1; i &lt; n; i++) { pow2 = pow2 * 2 % mod; } LL res = (fact - pow2) % mod; if(res &lt; 0) res += mod; printf("%lld\n", res); } D é¢˜æ„
...</p></div><footer class=entry-footer><span title='2020-08-17 22:42:00 +0800 +0800'>ğŸ“ August 17, 2020</span>&nbsp;Â·&nbsp;âŒ› 5 min</footer><a class=entry-link aria-label="post link to Codeforces Round #663" href=https://Anlarry.github.io/posts/acm-icpc/codeforces-round-663/></a></article><footer class=page-footer><nav class=pagination><a class=next href=https://Anlarry.github.io/posts/page/2/>Next&nbsp;&nbsp;Â»</a></nav></footer></main><footer class=footer><span>Jiali Wang</span> Â·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>